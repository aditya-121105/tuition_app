<!DOCTYPE html>
<html>
<head>
    <title>My Fees | Student Panel</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        body{
            font-family:'Poppins',sans-serif;
            background:#f6f9ff;
            margin:0;
            padding:0;
        }

        .container-box{
            width:85%;
            margin:40px auto;
            background:white;
            padding:30px;
            border-radius:14px;
            box-shadow:0 6px 20px rgba(0,0,0,.07);
            animation:fadeUp .9s ease;
        }

        h2{
            margin:0;
            font-weight:600;
            color:#1a3a60;
            font-size:28px;
        }

        .summary{
            display:flex;
            gap:25px;
            margin-top:18px;
            font-size:16px;
        }

        .summary div{
            background:#eef4ff;
            padding:12px 20px;
            border-radius:10px;
            font-weight:600;
            border-left:5px solid #4372ff;
        }

        .summary div:nth-child(2){ border-color:#22bb33; }
        .summary div:nth-child(3){ border-color:#ff3535; }

        table{
            width:100%;
            border-collapse:collapse;
            margin-top:25px;
        }
        th{
            background:#1f497d;
            color:white;
            padding:12px;
            font-size:15px;
            text-align:left;
        }
        td{
            padding:10px;
            border-bottom:1px solid #e7e7e7;
        }

        tr:hover{
            background:#fff7d1;
            transition:.3s;
        }

        .badge{
            padding:6px 12px;
            border-radius:20px;
            font-size:13px;
        }

        .paid{ background:#22bb33;color:white; }
        .pending{ background:#ff3535;color:white; }

        .btn{
            padding:8px 14px;
            border-radius:8px;
            cursor:pointer;
            text-decoration:none;
            font-size:14px;
            transition:.3s;
            border:none;
        }

        .btn-pay{
            background:#2979ff;
            color:white;
        }
        .btn-pay:hover{ background:#0059d1; box-shadow:0 6px 15px rgba(0,90,210,.4); }

        .btn-receipt{
            background:#555;
            color:white;
        }
        .btn-receipt:hover{
            background:black;
        }

        .btn-back{
            background:#1c3055;
            color:white;
            padding:10px 18px;
            display:inline-block;
            margin-top:25px;
            text-decoration:none;
            border-radius:8px;
        }
        .btn-back:hover{ background:#314b78; }

        @keyframes fadeUp{
            from{opacity:0;transform:translateY(25px);}
            to{opacity:1;transform:translateY(0);}
        }
    </style>
</head>

<body>
<div class="container-box">

    <h2>ðŸ“˜ My Fee Status</h2>

    <!-- Summary Boxes -->
    <div class="summary">
        <div>Monthly Fee: â‚¹{{ monthly_fee }}</div>
        <div>Total Paid: â‚¹{{ total_paid }}</div>
        <div>Total Pending: â‚¹{{ total_pending }}</div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Month</th>
                <th>Status</th>
                <th>Paid Date</th>
                <th>Action</th>
            </tr>
        </thead>

        <tbody>
            {% for r in records %}
            <tr>
                <td>{{ r.month }} {{ r.year }}</td>

                <td>
                    {% if r.status == "Paid" %}
                        <span class="badge paid">Paid</span>
                    {% else %}
                        <span class="badge pending">Pending</span>
                    {% endif %}
                </td>

                <td>
                    {% if r.paid_date %} {{ r.paid_date.strftime('%d-%m-%Y') }} {% else %}-{% endif %}
                </td>

                <td>
                    {% if r.status == "Paid" %}
                        <a href="/receipt/{{ r.id }}" class="btn btn-receipt">ðŸ“„ Receipt</a>

                    {% elif first_pending and r.id == first_pending.id %}
                        <form method="POST" style="display:inline;">
                            <button class="btn btn-pay">ðŸ’³ Pay Now</button>
                        </form>

                    {% else %}
                        <span style="color:#888;">---</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% if not first_pending %}
        <p style="text-align:center;color:#1fa13c;font-size:18px;font-weight:600;margin-top:20px;">
        ðŸŽ‰ All fees are paid!
        </p>
    {% endif %}

    <a href="/student/dashboard" class="btn-back">â¬… Back</a>

</div>
</body>
</html>
