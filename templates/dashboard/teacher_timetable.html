<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Class Timetable</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        body{
            font-family:"Poppins",sans-serif;
            background:#f6f9ff;
            margin:0;
            padding:0;
        }

        /* NAV TOP */
        .navbar{
            background:#1B263B;
            padding:14px 22px;
            color:white;
            font-size:20px;
            font-weight:600;
            display:flex;
            align-items:center;
        }
        .navbar a{
            margin-left:auto;
            background:#d9534f;
            padding:7px 14px;
            border-radius:7px;
            color:white;
            text-decoration:none;
            font-size:15px;
        }

        /* MAIN CARD */
        .container{
            width:90%;
            margin:35px auto;
            background:white;
            padding:28px;
            border-radius:15px;
            box-shadow:0 5px 25px rgba(0,0,0,0.08);
        }

        h2{font-weight:600;margin-bottom:18px;}

        /* DROPDOWN */
        select{
            width:260px;
            padding:10px;
            border-radius:7px;
            border:2px solid #d9d9d9;
            font-size:15px;
        }
        select:focus{border-color:#3a7dfd;outline:none;}

        .class-box{
            margin-bottom:22px;
        }

        /* FORM LAYOUT (Fix merging issue) */
        .form-flex{
            display:flex;
            gap:18px;
            flex-wrap:wrap;
            margin-bottom:22px;
        }
        .form-flex input,
        .form-flex select{
            flex:1;
            min-width:280px;
            padding:11px;
            border-radius:7px;
            border:2px solid #cfcfcf;
            font-size:15px;
        }
        .form-flex input:focus,
        .form-flex select:focus{border-color:#3a7dfd;}

        .add-btn{
            background:#28a745;
            color:white;
            border:none;
            padding:11px 20px;
            border-radius:7px;
            font-size:15px;
            cursor:pointer;
            transition:.25s;
        }
        .add-btn:hover{background:#1f8b3d;transform:scale(1.06);}

        /* TABLE FIX */
        table{
            width:100%;
            border-collapse:collapse;
            margin-top:25px;
            border-radius:15px;
            overflow:hidden;
            box-shadow:0 3px 17px rgba(0,0,0,0.04);
            text-align:center;
        }
        th,td{
            padding:14px;
            font-size:15px;
            white-space:nowrap;
        }
        th{
            background:#006eff;
            color:white;
            font-size:16px;
            letter-spacing:0.3px;
        }
        td{background:white;}

        tbody tr:hover{
            background:#eaf2ff;
            transition:.25s;
            transform:scale(1.01);
        }

        /* Column Widths = No More Merging */
        td:nth-child(1){width:15%;}
        td:nth-child(2){width:35%;}
        td:nth-child(3){width:35%;}
        td:nth-child(4){width:15%;}

        .delete-btn{
            background:#d9534f;
            color:white;
            border:none;
            padding:6px 12px;
            border-radius:6px;
            cursor:pointer;
            font-size:14px;
        }
        .delete-btn:hover{background:#b73834;}
    </style>
</head>
<body>

<!-- NAVBAR -->
<div class="navbar">
    ðŸ“… Teacher Timetable
    <a href="/teacher/dashboard">Dashboard</a>
</div>


<!-- MAIN BODY -->
<div class="container">

    <h2>Class Wise Timetable</h2>

    <!-- CLASS SELECT -->
    <form method="GET" action="/teacher/timetable" class="class-box">
        <select name="class" onchange="this.form.submit()">
            <option value="">Select Class</option>
            {% for i in range(1,13) %}
            <option value="Class {{ i }}" {% if selected_class == ("Class " ~ i) %}selected{% endif %}>
                Class {{ i }}
            </option>
            {% endfor %}
        </select>
    </form>


    {% if selected_class %}

    <h3 style="margin-bottom:15px;">Showing Timetable for <b>{{ selected_class }}</b> ðŸ“˜</h3>

    <!-- ADD FORM -->
    <form method="POST" action="/teacher/timetable/add">
        <input type="hidden" name="class_name" value="{{ selected_class }}">

        <div class="form-flex">
            <select name="day" required>
                <option disabled selected>Choose Day</option>
                <option>Monday</option><option>Tuesday</option><option>Wednesday</option>
                <option>Thursday</option><option>Friday</option><option>Saturday</option>
            </select>

            <input type="text" name="subject" placeholder="Enter Subject (e.g. Maths)" required>
            <input type="text" name="time" placeholder="e.g. 10:00 - 11:00" required>
        </div>

        <button class="add-btn">âž• Add Timetable</button>
    </form>


    <!-- TIMETABLE TABLE -->
    <table>
        <thead>
            <tr>
                <th>Day</th><th>Subject</th><th>Time Slot</th><th>Action</th>
            </tr>
        </thead>

        <tbody>
            {% for row in records %}
            <tr>
                <td>{{ row.day }}</td>
                <td>{{ row.subject }}</td>
                <td>{{ row.time }}</td>
                <td><a href="/teacher/timetable/delete/{{ row.id }}"><button class="delete-btn">Delete</button></a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% endif %}

</div>

</body>
</html>
