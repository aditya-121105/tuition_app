<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<title>My Marks Report</title>

<!-- Poppins Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<!-- AdminLTE + Icons -->
<link rel="stylesheet" href="{{ url_for('static', filename='adminlte/dist/css/adminlte.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='adminlte/plugins/fontawesome-free/css/all.min.css') }}">

<style>

    body{
        font-family:'Poppins',sans-serif;
        background:linear-gradient(135deg,#ffecd2,#fcb69f);
        min-height:100vh;
        margin:0;
        padding:40px 0;
        display:flex;
        justify-content:center;
    }

    .marks-box{
        width:850px;
        background:rgba(255,255,255,0.95);
        border-radius:20px;
        padding:35px;
        box-shadow:0 15px 35px rgba(0,0,0,0.25);
        backdrop-filter:blur(10px);
        animation:fadeIn .8s ease;
    }

    h2{
        font-weight:700;
        text-align:center;
        margin-bottom:12px;
    }

    .sub-info{
        text-align:center;
        font-size:14px;
        color:#444;
        margin-bottom:25px;
    }

    table{
        width:100%;
        border-collapse:collapse;
        font-size:15px;
    }

    thead{
        background:#ffa41b;
        color:white;
        font-weight:600;
        border-radius:12px;
    }

    thead th{
        padding:12px;
        text-align:center;
    }

    tbody tr{
        background:white;
        transition:.3s;
    }

    tbody tr:hover{
        background:#ffefd9;
    }

    td{
        padding:14px;
        text-align:center;
        font-weight:500;
    }

    /* Marks Progress Bar */
    .progress{
        background:#e8e8e8;
        height:10px;
        border-radius:6px;
        overflow:hidden;
        margin-top:5px;
    }

    .progress-bar{
        height:100%;
        transition:.5s;
    }

    .high{ background:#00c851; }
    .mid{ background:#ffbb33; }
    .low{ background:#ff4444; }

    /* Back Button */
    .btn-back{
        margin-top:25px;
        background:#222;
        color:white;
        border-radius:8px;
        padding:10px 20px;
        font-weight:600;
        text-decoration:none;
        display:inline-block;
        transition:.3s;
    }
    .btn-back:hover{
        background:black;
        transform:translateY(-2px);
        box-shadow:0 5px 15px rgba(0,0,0,0.4);
    }

    @keyframes fadeIn{
        from{opacity:0;transform:translateY(-10px);}
        to{opacity:1;transform:translateY(0);}
    }

</style>
</head>

<body>

<div class="marks-box">

    <h2><i class="fas fa-chart-line"></i> Marks Report</h2>
    <div class="sub-info">
        Enrollment No: <b>{{ current_user.enrollment_no }}</b>
    </div>

    <table class="table">
        <thead>
            <tr>
                <th>Date</th>
                <th>Subject</th>
                <th>Marks</th>
                <th>Progress</th>
            </tr>
        </thead>

        <tbody>
        {% for m in records %}
        {% set percent = (m.score / m.out_of) * 100 %}
        <tr>
            <td>{{ m.date.strftime('%d-%m-%Y') }}</td>
            <td>{{ m.subject }}</td>
            <td>{{ m.score }}/{{ m.out_of }}</td>

            <td>
                <div class="progress">
                    <div class="progress-bar
                         {% if percent>=75 %}high{% elif percent>=40 %}mid{% else %}low{% endif %}"
                         style="width:{{ percent }}%">
                    </div>
                </div>
                {% if percent>=75 %}
                    <span style="color:#00c851;font-weight:600;">Excellent</span>
                {% elif percent>=40 %}
                    <span style="color:#ff8800;font-weight:600;">Average</span>
                {% else %}
                    <span style="color:#ff4444;font-weight:600;">Needs Improvement</span>
                {% endif %}
            </td>
        </tr>
        {% else %}
        <tr><td colspan="4" style="padding:20px;font-size:16px;font-weight:600;color:#333">No marks uploaded yet.</td></tr>
        {% endfor %}
        </tbody>

    </table>

    <br>
    <a href="/student/dashboard" class="btn-back"><i class="fas fa-arrow-left"></i> Back</a>

</div>

</body>
</html>
